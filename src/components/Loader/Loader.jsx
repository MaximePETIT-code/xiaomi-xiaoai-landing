import { useEffect, useRef } from "react";
import { gsap } from "gsap";
import PropTypes from "prop-types";
import styles from "./Loader.module.scss";

export default function Loader({ showLoader }) {
  const loaderRef = useRef(null);
  const logoRef = useRef(null);

  useEffect(() => {
    gsap.fromTo(
      logoRef.current,
      { opacity: 0 },
      { opacity: 1, duration: 1, delay: 0.2 }
    );
  }, []);

  useEffect(() => {
    !showLoader &&
      gsap.fromTo(
        loaderRef.current,
        { opacity: 1 },
        { opacity: 0, duration: 0.5, ease:"power2.out" }
      );
  }, [showLoader]);

  return (
    <div ref={loaderRef} className={styles.loader}>
      <div className={styles.loader__container}>
        <svg
          ref={logoRef}
          width="52"
          height="36"
          viewBox="0 0 52 36"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M43.2467 35.3334C43.0628 35.3334 42.8864 35.2603 42.7564 35.1303C42.6264 35.0003 42.5533 34.8239 42.5533 34.6401V1.36005C42.5533 1.17617 42.6264 0.999818 42.7564 0.869793C42.8864 0.739768 43.0628 0.66672 43.2467 0.66672H51.285C51.3779 0.663817 51.4703 0.679605 51.557 0.713146C51.6436 0.746687 51.7226 0.797297 51.7893 0.861971C51.856 0.926644 51.909 1.00406 51.9452 1.08962C51.9814 1.17519 52 1.26715 52 1.36005V34.6401C52 34.733 51.9814 34.8249 51.9452 34.9105C51.909 34.996 51.856 35.0735 51.7893 35.1381C51.7226 35.2028 51.6436 35.2534 51.557 35.287C51.4703 35.3205 51.3779 35.3363 51.285 35.3334H43.2467ZM29.77 35.3334C29.77 35.3334 29.12 35.1384 29.12 34.6401V14.2084C29.1405 13.5718 29.032 12.9376 28.8011 12.3441C28.5702 11.7505 28.2216 11.2097 27.7763 10.7543C27.331 10.2989 26.7983 9.9383 26.21 9.6941C25.6218 9.44991 24.9902 9.32721 24.3533 9.33339H9.31667C8.45 9.33339 8.66667 9.98339 8.66667 9.98339V34.6401C8.66667 35.2251 8.01667 35.3334 8.01667 35.3334H0.715C0.622143 35.3363 0.52965 35.3205 0.443014 35.287C0.356378 35.2534 0.277367 35.2028 0.210672 35.1381C0.143978 35.0735 0.0909609 34.996 0.0547706 34.9105C0.0185803 34.8249 -4.52911e-05 34.733 8.27016e-08 34.6401V1.36005C-4.52911e-05 1.26715 0.0185803 1.17519 0.0547706 1.08962C0.0909609 1.00406 0.143978 0.926644 0.210672 0.861971C0.277367 0.797297 0.356378 0.746687 0.443014 0.713146C0.52965 0.679605 0.622143 0.663817 0.715 0.66672H28.5783C31.0227 0.683848 33.3615 1.66544 35.086 3.398C36.8104 5.13056 37.781 7.47392 37.7867 9.91839L37.8083 34.6401C37.8083 34.8239 37.7353 35.0003 37.6053 35.1303C37.4752 35.2603 37.2989 35.3334 37.115 35.3334H29.77ZM14.82 35.3334C14.6476 35.3334 14.4823 35.2649 14.3604 35.143C14.2385 35.0211 14.17 34.8558 14.17 34.6834V15.1834C14.17 15.011 14.2385 14.8457 14.3604 14.7238C14.4823 14.6019 14.6476 14.5334 14.82 14.5334H22.9883C23.1569 14.539 23.3168 14.61 23.434 14.7313C23.5513 14.8526 23.6168 15.0147 23.6167 15.1834V34.6834C23.6167 34.8558 23.5482 35.0211 23.4263 35.143C23.3044 35.2649 23.1391 35.3334 22.9667 35.3334H14.82Z"
            fill="#0094FE"
          />
        </svg>
      </div>
    </div>
  );
}

Loader.propTypes = {
  showLoader: PropTypes.bool.isRequired,
};
